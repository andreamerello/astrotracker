#:kivy 1.0
#:import kivy kivy
#:import win kivy.core.window

<Widget>:
    # default: transparent
    border_color: (1, 1, 1, 0)

    canvas.after:
        Color:
            rgba: self.border_color

        Line:
            rectangle: self.x+1,self.y+1,self.width-1,self.height-1
            dash_offset: 5
            dash_length: 3

<MainMenuScreen>:
    BoxLayout:
        orientation: 'vertical'
        Button:
            text: "Polar alignment"
            on_release: app.open_polar()
        Button:
            text: "Camera control"
            on_release: app.open_camera()
        Button:
            text: "Upgrade version"
            on_release: app.upgrade_from_github()
        Button:
            text: "Quit"
            on_release: app.stop()

<PolarScreen>:
    Image:
        id: piframe
        texture: root.camera.frame_texture
        pos: 0, 0
        size: root.size
        size_hint: None, None
        allow_stretch: True

    Image:
        id: stars
        source: "stars.png"
        pos: 0, 0
        size: root.size
        size_hint: None, None
        allow_stretch: True
        canvas.before:
            PushMatrix
            Rotate:
                angle: root.stars_angle
                origin: self.center
        canvas.after:
            PopMatrix


    Label:
        text: "%s\nFrame %d" % (root.camera.status, root.camera.frame_no)
        font_size: '50sp'
        color: (1, 0, 0, 1) if root.ids.piframe.texture is None else (0, 0, 0, 0)

    Button:
        pos: 100, 100
        size: 50, 20
        size_hint: None, None
        text: "start"
        on_release: root.camera.start()

    Button:
        pos: 150, 100
        size: 50, 20
        size_hint: None, None
        text: "stop"
        on_release: root.camera.stop()

    Button:
        pos: 200, 100
        size: 20, 20
        size_hint: None, None
        text: "-"
        on_release: root.stars_angle -= 1

    Button:
        pos: 220, 100
        size: 20, 20
        size_hint: None, None
        text: "+"
        on_release: root.stars_angle += 1
